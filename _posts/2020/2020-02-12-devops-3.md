---
title: DevOps - 用户故事(03)
author:
  name: superhsc
  link: https://github.com/happymaya
date: 2020-02-12 10:33:00 +0800
categories: [DevOps]
tags: [DevOps, 用户地图]
math: true
mermaid: true
image:
  src: https://images.happymaya.cn/assert/devops/devops.png
  width: 800
  height: 500
---

在工作中，经常会遇到下面的场景。
> 对于一个用户需求，产品、开发和测试对这个需求的理解完全不一样，最终交付的产品根本不是用户想要的

上面所述的情况在实际开发中非常普遍，本文就此问题写下若干心得体会。

用户故事，是一种将需求可视化的工具，它通过将需求拆分成一个又一个的用户故事，来组织软件开发。

每一个用户故事都是软件开发过程中相关角色沟通的媒介，也是一种通过合作沟通的方式来理解用户需求的工具。

# 软件开发是一项团体项目
众所周知，软件是由诸多功能组成的，而每个功能都经历从需求分析、代码开发、软件测试、部署的整个开发流程。

整个软件开发流程里，功能从需求开始流经整个软件开发的过程，其中涉及到多种角色：

1. 产品经理对功能的需求分析，
2. 开发人员对功能的代码实现，
3. 测试人员对功能的功能测试，
4. 最后运维人员将功能部署到生产环境交付给用户

每个领域的人员都有一个共同的目标：将功能交付给用户。

团队协作是个老生常谈的话题，但真正做到高效协作并非易事。

软件开发流程中涉及的各个人员，都有自己的工作规范，语言和节奏也各不相同。同时，软件开发中的功能与篮球不同，看不见摸不着，当功能在每个角色之间流转时，是将自己领域的产出交付下一个角色，产品经理交付开发功能需求，开发交付测试代码，测试交付运维是的制品。由于交付物不同，增加了彼此之间沟通协调的难度。

因此，需要一种能够让大家达成共识的方法。这就需要让软件开发过程中的每个角色都能理解用户的需求是什么，工作内容是什么。比如：产品经理提出“下订单时，送货地址从地址簿里选择”的需求，产品经理、开发人员、测试人员三者对这个需求的理解是不一样的。地址簿是下拉列表显示还是弹窗？这个隐含的需求决定了开发人员如何编写代码，测试人员如何编写测试用例。所以只有达成共识了，才能保证大家的工作方向是一致的。

# 共享文档并不代表达成共识

写文档，是软件开发过程中的通用动作，但是写文档存在的问题。

在传统开发模式中，产品经理通过先写一份用户需求说明书，然后传给开发、测试等相关人员，并期望他们能够按照这个文档去开发、测试，最终实现用户需求，但最终交付的软件常常并不能达到用户需求。

事实上，我们会习惯性地根据经验在文档范围内去思考，难免对内容理解不到位，造成误解。比如在上面的例子，产品经理想说的是“送货地址从地址簿里选择”，而开发就认为下拉列表的形式也是满足要求的，但用户可能需要一个弹窗的形式。很明显，文档并不能让人们彼此之间达成共识。

看文档，就像看旅游时拍的照片一样。当我们在看文档时，重要的并不是文档里记录的内容，而是当我们阅读文档时，脑子里能够回忆起什么。所以只有面对基于讨论写出的文档，参与讨论的各方才能对文档有一致的理解。没有参与讨论的人，是无法通过仅阅读文档来了解这些细节的。

**因此，达成共识的唯一方法是各相关方坐到一起，用有效的方式进行讨论，最终寻求一致的理解。这种有效的方式就是讲用户故事。**

用户故事之所以叫“故事”，是因为它是用来“讲”，而不是用来“写”的。它**从用户的角度来讲述如何使用软件的功能，带来怎样的收益**。整个软件团队通过讲用户故事，让大家获得对软件产品的一致理解，然后共同创造出更符合用户需求的产品。

# 如何“讲”好用户故事

用户故事的概念比较抽象。比如，用户说：“当我在输入‘送货地址’的时候，能立即显示出目前存在的地址。这样就可以从列表中选择一个，而不是每次都需要重新输入。”这是一个典型的用户使用场景，是一个用户故事。

就像上面提到的，用户故事是用来“讲”的，而不只是“写”的。上面的例子中，如果这个不讨论用户故事，你能知道【立即显示】是输入 1 个字、 2 个字，还是有光标就能显示呢？因此，用户故事的关键就是“讲”。那么，怎样才能“讲”好用户故事呢？

## 聚焦全景
软件开发最终交付给用户的是一个可以工作的软件，这就需要先实现一个一个单独的功能。因此，我们需要将一个大需求进行合理拆分，拆分后的需求就称为“用户故事”。

通过拆分用户故事的方式来组织开发产品，每个用户故事完成后，都需要与整个软件进行集成。

不过值得注意的是，当我们在将大需求拆解为用户故事，或者在讨论单个用户故事时，都需要从整体的视角出发，和团队一起理解正在开发的产品，共同讨论每个故事在整个产品中的定位、优先级、共同权衡和取舍。杰夫·巴顿（Jeff Patton）将这种做事的方法称为“**用户故事地图**”。

马丁·福勒（Martin Fowler）在给杰夫·巴顿（Jeff Patton）的《用户故事地图》一书作序时说：“**故事地图是一门在需求拆分过程中保持全景图的技术。**”全景图为一致的用户体验提供了基准，可以帮助团队之间，以及团队与用户之间进行有效的沟通。
下图是新开普云产品中用户故事地图功能的示例图。

![用户故事地图功能的示例图](https://images.happymaya.cn/assert/devops/devops-03-1.png)

在该用户故事地图的顶部是主干。主干通常分两级：
- 一级是组成该产品的基本骨架，如图中的用户场景层级，包含账号管理、产品首页、商品列表页等；
- 另一级是每个用户场景下包含的用户任务层级，如产品首页场景，包含首页轮播图、产品橱窗、产品搜索等。

从左到右看，整个用户故事地图的主干是一个所有用户和他们使用该软件产品的完整故事。从左到右的顺序，也是我们在讲故事时候的叙事主线，更容易被接受和理解。

再往下是具体的产品发布路线图，是团队根据市场需求和用户要求综合考虑后，决定要发布的用户故事。每个用户任务下的用户故事按照从上到下的顺序排列优先级。通常，选择那些对用户价值较大的用户故事进行发布。

有了这个用户故事全景图，团队中的每个角色都能清晰地知道本次迭代中需要交付的用户故事内容，用户是如何使用的，以及产品能够给用户带来什么帮助。有了对用户故事的一致理解，后续大家在交付每个用户故事的过程中就有了统一的目标，不容易产生误解。

## 3C 原则

有了基于用户故事地图的全景视图，并不表示讲好用户故事，还需要遵循 3C 原则。

3C 原则是在由 Ron Jeffries（罗恩·杰弗里斯） 等人在《极限编程实施》一书中提出的。3C 原则描述的是为了更有效的使用用户故事进行需求分析时应该遵循的原则：

- 卡片（Card）：在卡片上写下所期望的软件特性。
- 交谈（Conversation）：聚在一起对要开发的软件进行深入讨论。
- 确认（Confirmation）：对完成的特性进行确认。

## 使用故事模板

虽然有了上面的三个原则，但作为严谨的软件从业人员，这还不够。相对于产品和市场人员来说，很多开发人员不知道如何去讲用户故事，也不习惯讲用户故事。这时，你需要使用用户故事模板，这样就能够对卡片上的内容有一个指引，方便讨论。如下图所示：
![image.png](https://images.happymaya.cn/assert/devops/devops-03-2.png)

也就是说，在创建卡片的时候主要考虑以下三个问题：

1. 用户是谁？
2. 用户需要什么特性？
3. 用户需要这个特性是要解决什么问题？

在讨论之前，如果不能回答这三个问题，就无法知道我们交付这个用户故事的价值，也就不清楚这件事的意义，就无法交付对用户真正有用的东西。

统一的故事模板，就是为了统一团队成员之间沟通交流的语言。而基于故事模板内容来引发讨论，能提升讨论的效果。

为了达到更好的讨论效果，这里罗列几个讨论清单：

![](https://images.happymaya.cn/assert/devops/devops-03-3.png)


用户故事及用户故事地图，在很多企业的研发团队中都有使用。、软件开发是一个团队项目，在团队中沟通协调是至关重要的。

大多数时候，软件本身的功能并不复杂，但团队之间若因为沟通不到位，理解不一致，最终导致开发的产品与用户想要的不一样，可能会错过最佳的市场机会。这种因为疏忽，大意失荆州的事情是我们所有工作中都应该尽力去避免的。
